var app=app||{};!function(a){app.case_studyView=DS_View.extend({els:{poster:".ds-poster-container",detailModules:".detail-module",relatedGrid:".related-grid .ds-grid-container",modalVideos:".ds-modal-video",header:"header",workNav:".work-nav",backLink:".backlink"},initialize:function(){var b=this;app.appView.initPoster(),this.initDetailModules(),this.initRelatedGrid(),new DS_ScrollGrid(this.$el),this.initVideoModals(),a(window).resize(function(){b.resize()});var c=b.$workNav.clone();b.$header.prepend(c),b.$workNav.remove();var d=b.$backLink.clone();b.$header.prepend(d),b.$backLink.remove(),a(".categories.nav-link").on("click",function(b){var c=a(b.target);return c.hasClass("categories")||c.hasClass("industries")?(a(this).find(".dropdown-menu").toggleClass("open"),b.preventDefault(),!1):void 0}),a("body *:not(.categories.nav-link):not(h4)").on("click",function(b){a(".categories.nav-link .dropdown-menu").removeClass("open")})},initDetailModules:function(){this.$detailModules.each(function(){if(a(this).find(".ds-carousel").length>0){var b=new DS_Carousel(a(this).find(".ds-carousel"),{autostart:!1});if(a(this).hasClass("small-text")||a(this).hasClass("fullscreen-carousel")){$info=a(this).find(".info");var c=$info.find("li");c.length>1&&(c.hide(),a(b).on(b.events.SLIDE_CHANGE,function(a,b){var d=c.filter(".active");d.length?d.fadeOut(null,function(){c.removeClass("active"),c.eq(b.index).fadeIn().addClass("active"),DS_Helpers.rerender($info[0])}):c.eq(b.index).fadeIn().addClass("active")}))}if(a(this).hasClass("small-text")){var d=a(this).find(".ds-carousel"),e=d.data("video-id");if(e){var f=d.find(".image-container").eq(0);f.addClass("video").click(function(){new app.videoModal({videoid:e})}).append(a("<div class='video-button'><i class='ss-play'></i></div>"))}}b.start()}})},initVideoModals:function(){app.videoModal.createWrapper(),this.$modalVideos.click(function(){new app.videoModal({videoid:a(this).data("video-id")})})},initRelatedGrid:function(){var a=[{width:.8*globalBreakPoints["two-columns"],numColumns:2},{width:globalBreakPoints["one-column"],numColumns:1}];app.appView.initBasicGrid(this.$relatedGrid,{gridAR:1.125,breakPoints:a,maxColumns:3})},resize:function(){var a=600,b=a>Common.windowHeight?Common.windowHeight:a;this.$poster.css({height:b})}})}(jQuery);